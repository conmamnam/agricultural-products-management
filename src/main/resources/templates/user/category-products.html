<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${category != null ? 'Danh mục: ' + category.categoryName : 'Danh mục sản phẩm'}">Danh mục sản phẩm</title>
    <link rel="icon" type="image/png" href="/image/logo-web.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(145deg, #e8f5ee, #ffffff);
            font-family: "Poppins", sans-serif;
            min-height: 100vh;
        }
        .header-section {
            background: linear-gradient(135deg, #2e7d32, #1b5e20);
            color: white;
            padding: 25px 0;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(46, 125, 50, 0.25);
        }
        .header-section h1 {
            font-weight: 700;
        }
        .category-summary span {
            font-weight: 600;
        }
        .product-card {
            background: white;
            border-radius: 16px;
            padding: 18px;
            box-shadow: 0 5px 18px rgba(0, 0, 0, 0.08);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            height: 100%;
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 28px rgba(46, 125, 50, 0.22);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
        }
        .badge-category {
            background: rgba(1, 107, 52, 0.1);
            color: #016b34;
            border-radius: 999px;
            padding: 6px 14px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .product-price {
            color: #d63384;
            font-weight: 700;
            font-size: 1.1rem;
        }
        .empty-state {
            background: white;
            border-radius: 16px;
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 5px 18px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body>

<div class="header-section">
    <div class="container">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3">
            <div>
                <h1 class="mb-1">
                    <i class="bi bi-grid"></i>
                    <span th:text="${category != null ? category.categoryName : 'Danh mục sản phẩm'}">Danh mục sản phẩm</span>
                </h1>
                <p class="mb-0 category-summary">
                    <span th:text="${totalProducts}">0</span> sản phẩm thuộc danh mục này.
                </p>
            </div>
            <div class="d-flex gap-2">
                <a href="/home" class="btn btn-light">
                    <i class="bi bi-house-door"></i> Trang chủ
                </a>
                <a href="/product/all-product" class="btn btn-outline-light">
                    <i class="bi bi-shop"></i> Tất cả sản phẩm
                </a>
            </div>
        </div>
    </div>
</div>

<div class="container pb-5">
    <div class="row g-4">
        <div class="col-md-3">
            <div class="bg-white rounded-4 p-3 shadow-sm">
                <h5 class="text-success mb-3"><i class="bi bi-list-task"></i> Danh mục khác</h5>
                <div class="list-group list-group-flush">
                    <a th:each="item : ${categories}"
                       th:href="@{'/product/category/' + ${item.categoryId}}"
                       th:class="${item.categoryId == category.categoryId} ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'"
                       th:text="${item.categoryName}">
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-9">
            <div th:if="${#lists.isEmpty(products)}" class="empty-state">
                <i class="bi bi-emoji-neutral text-success" style="font-size: 60px;"></i>
                <h4 class="mt-3 text-muted">Chưa có sản phẩm trong danh mục này</h4>
                <p class="text-muted">Vui lòng quay lại sau hoặc tham khảo danh mục khác.</p>
                <a href="/product/all-product" class="btn btn-success mt-2">
                    <i class="bi bi-shop"></i> Xem tất cả sản phẩm
                </a>
            </div>

            <div class="row g-4" th:if="${!#lists.isEmpty(products)}">
                <div class="col-md-6 col-lg-4" th:each="product : ${products}">
                    <div class="product-card">
                        <a th:href="@{'/products/' + ${product.productId}}" class="text-decoration-none text-dark">
                            <img th:src="${product.imageUrl}" th:alt="${product.productName}">
                        </a>
                        <div class="mt-3">
                            <span class="badge-category" th:text="${category.categoryName}">Danh mục</span>
                        </div>
                        <h5 class="mt-3 mb-2 text-success fw-semibold">
                            <a th:href="@{'/products/' + ${product.productId}}"
                               class="text-decoration-none text-success"
                               th:text="${product.productName}">
                                Tên sản phẩm
                            </a>
                        </h5>
                        <p class="text-muted small" th:text="${product.description}">Mô tả sản phẩm</p>
                        <p class="product-price" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' đ'">0 đ</p>
                        <div class="d-flex align-items-center justify-content-between mt-3">
                            <span class="badge bg-info-subtle text-success" th:text="'Còn ' + ${product.stock} + ' sp'">Còn 0 sp</span>
                            <a th:href="@{'/products/' + ${product.productId}}" class="btn btn-outline-success btn-sm">
                                <i class="bi bi-eye"></i> Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

